var isOperaMini=undefined;try{isOperaMini=Object.prototype.toString.call(window.operamini)==="[object OperaMini]";}catch(e){}(function(){if(isOperaMini){return;}var el=document.getElementsByTagName("html")[0];var newClass=el.getAttribute("class").replace("no-js","");el.setAttribute("class",newClass);})();var _ready=_ready||[];var __canSetCookies=undefined;var __canDeleteCookies=undefined;_ready.push(function($){try{$.cookie.defaults.expires=365;$.cookie.defaults.path="/";$.cookie.defaults.domain=".allafrica.com";$.cookie.json=false;}catch(e){}window.cookiesEnabled=function(){var name="__enabled_check",value="TEST_VALUE";if(__canSetCookies!==undefined&&__canDeleteCookies!==undefined){return(__canSetCookies&&__canDeleteCookies);}try{$.cookie(name,value,{expires:1});if($.cookie(name)==value){__canSetCookies=true;$.cookie(name,"",{expires:-1});if($.cookie(name)===undefined){__canDeleteCookies=true;}else{__canDeleteCookies=false;}}else{__canSetCookies=false;__canDeleteCookies=false;}}catch(e){}if(__canSetCookies===undefined||__canDeleteCookies===undefined){return false;}return(__canSetCookies&&__canDeleteCookies);};});_ready.push(function($){if($(".is-dev").length>0&&window["Cohorts"]){Cohorts.Options.debug=true;}});var __aaEventTracker={debug:new RegExp("(^|\\s)is-dev(\\s|$)").test(document.getElementsByTagName("html")[0].getAttribute("class")),trackEvent:function(category,action,opt_label,opt_value,opt_noninteraction){if(typeof(opt_noninteraction)==="undefined"){opt_noninteraction=true;}if(this.debug&&window["console"]&&console.log){console.log("GA trackEvent: "+$.makeArray(arguments).join(", "));}if(this.debug){console.log("bypassing GA tracker");return;}if(window["__gaTracker"]){try{__gaTracker("send","event",category,action,opt_label,opt_value,{"nonInteraction":opt_noninteraction});}catch(e){}}else{throw ("__gaTracker object not found: It looks like you have not correctly setup the asynchronous Google Analytics tracking code, and you are using the default GoogleAnalyticsAdapter.");}},trackClick:function(eventData){__aaEventTracker.trackEvent(eventData.eventCategory,eventData.eventAction,eventData.eventLabel,undefined,true);},trackSocial:function(network,action,target){if(this.debug&&window["console"]&&console.log){console.log("GA trackSocial: "+$.makeArray(arguments).join(", "));}if(this.debug){console.log("bypassing GA tracker");return;}if(window["__gaTracker"]){try{__gaTracker("send","social",network,action,target);}catch(e){}}else{throw ("__gaTracker object not found: It looks like you have not correctly setup the asynchronous Google Analytics tracking code, and you are using the default GoogleAnalyticsAdapter.");}}};var dataLayer={push:function(){var obj=arguments[0];if(!obj.event){return;}switch(obj.event){case"experiment":__aaEventTracker.trackEvent(obj.nameSpace,obj.testName,obj.cohort+" | Total",undefined,true);break;case"event":__aaEventTracker.trackEvent(obj.eventCategory,obj.eventAction,obj.eventLabel+" | "+obj.eventName,undefined,false);break;case"ScrollDistance":if(obj.eventAction=="Elements"){if(obj.eventLabel=="#aans-body-end"){obj.eventNonInteraction=false;}}__aaEventTracker.trackEvent(obj.eventCategory,obj.eventAction,obj.eventLabel,obj.eventValue,obj.eventNonInteraction);break;default:console.log("uncaught event in dataLayer.push(): "+JSON.stringify(obj,"","  "));}}};window.fbAsyncInit=function(){FB.init({appId:window.__FBAppId,xfbml:true,version:"v2.0"});try{if(FB){FBIsLoaded=true;if(FB.Event&&FB.Event.subscribe){FB.Event.subscribe("edge.create",function(targetUrl){__aaEventTracker.trackSocial("Facebook","Like",targetUrl);});FB.Event.subscribe("edge.remove",function(targetUrl){__aaEventTracker.trackSocial("Facebook","Unlike",targetUrl);});FB.Event.subscribe("message.send",function(targetUrl){__aaEventTracker.trackSocial("Facebook","Send",targetUrl);});FB.Event.subscribe("comment.create",function(targetUrl){__aaEventTracker.trackSocial("Facebook","Comment",targetUrl);});FB.Event.subscribe("comment.remove",function(targetUrl){__aaEventTracker.trackSocial("Facebook","Uncomment",targetUrl);});}}}catch(e){}};var _qevents=_qevents||[];(function(){var elem=document.createElement("script");elem.src=(document.location.protocol=="https:"?"https://secure":"http://edge")+".quantserve.com/quant.js";elem.async=true;elem.type="text/javascript";var scpt=document.getElementsByTagName("script")[0];scpt.parentNode.insertBefore(elem,scpt);})();function extractParamFromUri(uri,paramName){if(!uri){return;}var regex=new RegExp("[\\?&#]"+paramName+"=([^&#]*)");var params=regex.exec(uri);if(params!=null){return unescape(params[1]);}return;}window.twttr=function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}return window.twttr||(t={_e:[],ready:function(f){t._e.push(f);}});}(document,"script","twitter-wjs");twttr.ready(function(twttr){twttr.events.bind("tweet",function(event){if(event){var targetUrl;if(event.target&&event.target.nodeName=="IFRAME"){targetUrl=extractParamFromUri(event.target.src,"url");}__aaEventTracker.trackSocial("Twitter","Tweet",targetUrl);}});twttr.events.bind("follow",function(event){if(event){var targetUrl;if(event.target&&event.target.nodeName=="IFRAME"){targetUrl=extractParamFromUri(event.target.src,"url");}__aaEventTracker.trackSocial("Twitter","Follow",targetUrl);}});});function shareFacebook(data){if(FBIsLoaded){FB.ui({method:"share",href:data.fullUrl},function(response){if(response&&!response.error_code){__aaEventTracker.trackSocial("Facebook","Share",data.fullUrl);}});return false;}else{var width=data.width,height=data.height,left=(window.screen.width-width)/2,top=(window.screen.height-height)/2,url="https://www.facebook.com/dialog/share?"+"app_id="+window.__FBAppId+"&display=popup"+"&href="+encodeURIComponent(data.fullUrl)+"&redirect_uri="+encodeURIComponent(data.fullUrl),popupOpts="status=1"+",width="+width+",height="+height+",top="+top+",left="+left;window.open(url,"Facebook",popupOpts);return false;}}function shareFacebookFeed(data){if(FBIsLoaded){FB.ui({method:"feed",link:data.canonical_url,name:data.name,caption:data.caption,picture:data.picture,description:data.description,redirect_uri:data.canonical_url,display:"popup"},function(response){if(response&&!response.error_code){__aaEventTracker.trackSocial("Facebook","Share",data.canonical_url);}});return false;}else{var width=data.width,height=data.height,left=(window.screen.width-width)/2,top=(window.screen.height-height)/2,url="https://www.facebook.com/dialog/feed?"+"app_id="+window.__FBAppId+"&display=popup"+"&name="+encodeURIComponent(data.name)+"&caption="+encodeURIComponent(data.caption)+"&picture="+encodeURIComponent(data.picture)+"&description="+encodeURIComponent(data.description)+"&link="+encodeURIComponent(data.canonical_url)+"&redirect_uri="+encodeURIComponent(data.canonical_url),popupOpts="status=1"+",width="+width+",height="+height+",top="+top+",left="+left;window.open(url,"Facebook",popupOpts);return false;}}function shareTwitter(data){if(window.twttr){return;}var width=data.width,height=data.height,left=(window.screen.width-width)/2,top=(window.screen.height-height)/2,url="https://twitter.com/intent/tweet?"+"url="+encodeURIComponent(data.shortUrl)+"&text="+encodeURIComponent(data.title)+"&via="+data.account+"&related=allafrica,allafricafrench,allafricasport",popupOpts="status=1"+",width="+width+",height="+height+",top="+top+",left="+left;window.open(url,"twitter",popupOpts);return false;}function shareGoogle(data){var width=data.width,height=data.height,left=(window.screen.width-width)/2,top=(window.screen.height-height)/2,url="https://plus.google.com/share?"+"url="+encodeURIComponent(data.fullUrl),popupOpts="status=1"+",width="+width+",height="+height+",top="+top+",left="+left;window.open(url,"Google+",popupOpts);return false;}_ready.push(function($){if($("#comments").length==0){$(".sharebar .button_comment").hide();}$(".sharebar").on("click","a.button_facebook",function(e){e.preventDefault();return shareFacebook($(this).data());});$(".sharebar").on("click","a.button_twitter",function(e){e.preventDefault();return shareTwitter($(this).data());});$(".sharebar").on("click","a.button_google_plus",function(e){e.preventDefault();return shareGoogle($(this).data());});});_ready.push(function($){$(".facebook_quiz").on("click",function(e){e.preventDefault();return shareFacebookFeed($(this).data());});$(".twitter_quiz").on("click",function(e){e.preventDefault();return shareTwitter($(this).data());});});